<div x-data="alpineOperations()">
    <div>
        <div>
            <h2>Operations</h2>
            <p>
                Start a new operation or review previous ones here.
            </p>
        </div>
        <hr>
        <div class="columns">
            <div class="column">
                <h3>View</h3>
                <form>
                    <div class="field">
                        <label class="label">Choose an operation:</label>
                        <div class="control">
                            <div class="select">
                                <select id="operation-select" x-on:change="loadPlanner()" x-model="selectedOperation">
                                    <option value="" disabled selected>Select an existing operation</option>
                                    {% for op in operations %}
                                    {% if op.start|length%}
                                    <!--                                TODO: check that this works-->
                                    <!--                                    <option :id="'{{ op.id|e }}-{{ op.name|e }}'" :value="'{{ op.id|e }}'">{{ op.name|e }} - {{ op.start|e }}</option>-->
                                    <option class="operationOption" id="{{ op.id|e }}-{{ op.name|e }}"
                                            value="{{ op.id|e }}">{{ op.name|e }} - {{ op.start|e }}
                                    </option>
                                    {% endif %}
                                    {% endfor %}
                                </select>
                                <input id="agent-output" type="checkbox" x-model="isAgentOutputSelected">
                                <label for="agent-output">include agent output</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="column is-flex is-flex-direction-column is-align-items-flex-end space">
                <div class="py-1"><button class="button is-primary">+ Add operation</button></div>
                <div class="py-1"><button class="button is-primary">v Download full report</button></div>
                <div class="py-1"><button class="button is-primary">v Download event logs</button></div>
                <div class="py-1"><button class="button is-primary">! Delete</button></div>
            </div>
        </div>
    </div>
</div>

<script>
    function alpineOperations() {
        return {
            selectedOperation: '',
            operations: [],
            isAgentOutputSelected: false,
            currentView: 'view',
            operation: {
                name: ''
            }
        }
    }
</script>
